<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/main.css" rel="stylesheet">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Datatable css -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
    <!--prism CSS-->
    <link  type="text/css" href="css/prism.css" rel="stylesheet" /> 
</head>

<body>

    <header>
        <div class="navbar-fixed">
            <nav>
                <div class="nav-wrapper">
                    <div class="container">
                        <a href="#!" class="brand-logo">App Gestion Compte Administratif </a>
                        <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                        <ul class="right hide-on-med-and-down">
                            <li><a href="#introduction">introduction</a></li>
                            <li><a href="#application">Application</a></li>
                            <li><a href="#bdd">Base De Données</a></li>
                            <li><a href="#interface">Interface</a></li>
                            <li><a href="#logiciel">Logiciel</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <ul class="sidenav" id="mobile-demo">
            <li><a href="#introduction">introduction</a></li>
            <li><a href="#application">Base De Données</a></li>
            <li><a href="#bdd">Implementation</a></li>
            <li><a href="#interface">Interface</a></li>
            <li><a href="#logiciel">Logiciel</a></li>
        </ul>
    </header>
    <section id="introduction" class="section container scrollspy">
        <h1>Introduction</h1>
        <p>Pour mettre en application les différents cours, 
            nous devons créer un logiciel de gestion administratif, 
            permettant d’afficher, d’ajouter, supprimer et 
            modifier des données d’une base de données avec une sécurité 
            par mot de passe lors de certaines opérations.</p>
        <h3>Cahier des Charges</h3>
        <ul class="browser-default">
            <li>
                <h6>Création de la base de données </h6>
                <p>Analysez le jeu de données fourni, décrivez les anomalies introduises par la conception initiale ; 
                    standardisez la base de données afin d’obtenir un schéma relationnel avec des relations en troisième forme normale ; 
                    créer la BD sous Oracle et la charger à partir des données fournies.</p>
            </li>
            <li>
                <h6>Création d’une interface</h6>
                <p>
                    Développer une interface interactive avec le langage Java qui permet un utilisateur de : (1) ajouter des nouveaux tuples en remplissant un formulaire ; 
                    (2) chercher des informations selon certaines critères (ex. en cochant des cases, ou en saisissant les valeurs de certains attributs), 
                    et (3) afficher les résultats dynamiquement. Pour le point (2), 
                    quelques besoins sont imposés et doivent être intégrées dans l’interface :
                </p>
                <ul class="browser-default">
                    <li>L'utilisateur doit pouvoir ajouter un nouvel enregistrement dans la base de données. Cette fonction doit être protégée par un mot de passe.</li>
                    <li>L'utilisateur doit pouvoir modifier les informations concernant un enregistrement. Cette fonction doit être protégée par un mot de passe.</li>
                    <li>L'utilisateur doit pouvoir supprimer un enregistrement. Cette fonction doit être protégée par un mot de passe.</li>
                    <li>L'utilisateur doit pouvoir trouver le montant total dépensé ou reçu par rapport à un chapitre ou un article.</li>
                    <li>L'utilisateur doit pouvoir trouver les informations pertinentes en précisant des critères de recherche via un formulaire.</li>
                </ul>
            </li>
            <li>
                <h6>Connecter la base de données à l’interface</h6>
                <p>Etablissez une connexion au serveur Oracle de l’UPS dans le programme, 
                    envoyer les requêtes reçues via l’interface au serveur, récupérer et afficher les résultats.</p>
            </li>
        </ul>
        
    </section>

    <!-- parallax -->
    <div class="parallax-container">
        <div class="parallax">
            <img src="contenu/images/bck1.jpg" alt="Photo de Karolina Grabowska provenant de Pexels" class="responsive-img">
        </div>
    </div>

    <section id="application" class="section container scrollspy">
       <h1>L'application</h1>
       <h3>Création de la base de données</h3>
       <p>Pour la création de la base on nous a données un document .csv avec toutes données nécessaire pour construire/standardiser notre base de données en mettant en application les méthodes vu en cours.</p>
       <div class="table_container">
        <table id="example" class="compact stripe" style="width:100%">
                <thead>
                    <tr>
                        <th>Entite Financiere Programme</th>
                        <th>Nomenclature Comptable</th>
                        <th>DEPENSES_RECETTES</th>
                        <th>INVESTISSEMENT_FONCTIONNEMENT</th>
                        <th>Code Chapitre</th>
                        <th>Libelle Chapitre</th>
                        <th>Code Article</th>
                        <th>Libelle Article</th>
                        <th>Code Presentation Croisee</th>
                        <th>Libelle Presentation Croisee</th>
                        <th>ORDRE_REEL</th>
                        <th>MontantRealise</th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <th>Entite Financiere Programme</th>
                        <th>Nomenclature Comptable</th>
                        <th>DEPENSES_RECETTES</th>
                        <th>INVESTISSEMENT_FONCTIONNEMENT</th>
                        <th>Code Chapitre</th>
                        <th>Libelle Chapitre</th>
                        <th>Code Article</th>
                        <th>Libelle Article</th>
                        <th>Code Presentation Croisee</th>
                        <th>Libelle Presentation Croisee</th>
                        <th>ORDRE_REEL</th>
                        <th>MontantRealise</th>
                    </tr>
                </tfoot>
            </table>
            <h4>Standardisation de la base de données</h4>
        <h6>1er étapes : identifiées les dépendances fonctionnelles</h6>
        <pre>
            EntitéFinanciereProgramme → NomenclatureComptable
            CodeChapitre → LibelleChapitre 
            CodeArticle → LibelleArticle
            CodePresentationCroisee → LibellePresentationCroisee 
        </pre>
        <h6>2eme étapes : Recherches d’anomalie</h6>
		<pre>
             Redondance des données
        </pre>
        <h6>3eme étapes : Recherches de la clé universelle</h6>
           
        <pre>
            Nous sommes parvenus à la clé suivante : 

            (EntitéFinanciereProgramme, Depense_Recette, CodeArticle, CodeChapitre, 
            CodePresentationProgramme, Ordre_Reel, Montant, Investissement_Financement)   

            Elle est relativement important nous avons donc suivi votre conseil est créer une clé artificielle 
            ID qui réuni les champs de la clé ci-dessus 
        </pre>
        <h6>4eme étape : Couverture Minimale</h6>
        <pre>
            ID→ EntitéFinanciereProgramme , Depense_Recette , CodeArticle , CodeChapitre , 
            CodePresentationProgramme , Ordre_Reel,Montant , Investissement_Financement , 
            NomenclatureComptable , LibelleChapitre ,LibelleArticle ,LibellePresentationCroisee 
            
            EntitéFinanciereProgramme → NomenclatureComptable 
            CodeChapitre → LibelleChapitre 
            CodeArticle → LibelleArticle 
            CodePresentationCroisee → LibellePresentationCroisee

        </pre>
        <h6>5 eme etape : Application de l’algorithme de décomposition</h6>
        <pre>

                    R(ID,EntitéFinanciereProgramme , Depense_Recette , CodeArticle , CodeChapitre , CodePresentationProgramme , Ordre_Reel,Montant ,
                    Investissement_Financement , NomenclatureComptable , LibelleChapitre ,LibelleArticle ,LibellePresentationCroisee) 
                    |                                                        |
R1(CodeArticle,LibelleArticle)      R’(ID,EntitéFinanciereProgramme , Depense_Recette , CodeArticle , CodeChapitre , 
                                    CodePresentationProgramme , Ordre_Reel,Montant , Investissement_Financement , 
                                    NomenclatureComptable , LibelleChapitre ,LibellePresentationCroisee)     
                                                |                                        |
                R2(EntitéFinanciereProgramme,NomenclatureComptable)    R’’(ID,EntitéFinanciereProgramme , Depense_Recette , 
                                                                        CodeArticle , CodeChapitre , CodePresentationProgramme , Ordre_Reel,Montant , 
                                                                        Investissement_Financement, LibelleChapitre ,LibellePresentationCroisee) 
                                                                              |                                      |
                                                     R3(CodeChapitre, LibelleChapitre)      R’’’(ID,EntitéFinanciereProgramme , Depense_Recette , CodeArticle , CodeChapitre , 
                                                                                            CodePresentationProgramme , Ordre_Reel,Montant , Investissement_Financement,
                                                                                            LibellePresentationCroisee)
                                                                                            |                                            |
                                                    R4(CodePresentationCroisee , LibellePresentationCroisee)  R5(ID,EntitéFinanciereProgramme , Depense_Recette , CodeArticle ,                
                                                                                                              CodeChapitre , CodePresentationProgramme , Ordre_Reel,Montant ,
                                                                                                              Investissement_Financement) 
        </pre>
        </div>  
    </section>
    
    <!-- parallax -->
    <div class="parallax-container">
        <div class="parallax">
            <img src="contenu/images/bck1.jpg" alt="Photo de Karolina Grabowska provenant de Pexels" class="responsive-img">
        </div>
    </div>

    <section id="bdd" class="section container scrollspy">
        
        <h4>Implementation de la base de données</h4>
        <h5>Création des tables</h5>
        <pre>
            <code class="language-sql">
CREATE TABLE article (
    codeArticle number(12) NOT NULL,
    libelleArticle VARCHAR2(200) NOT NULL,
    CONSTRAINT pk_article PRIMARY KEY (codeArticle)
);
-- -------------------------------------------------------
CREATE TABLE chapitre (
    codeChapitre number(12) NOT NULL,
    libelleChapitre VARCHAR2(200) NOT NULL,
    CONSTRAINT pk_chapitre PRIMARY KEY (codeChapitre)
);
-- --------------------------------------------------------
CREATE TABLE entitefinanciereprogramme (
    EntiteFinanciereProgramme VARCHAR2(200) NOT NULL,
    NomenclatureComptable VARCHAR2(5) NOT NULL,
    CONSTRAINT pk_entite PRIMARY KEY (EntiteFinanciereProgramme)
);
-- --------------------------------------------------------
CREATE TABLE presentationcroisee (
    codePresentationCroisee number(12) NOT NULL,
    libellePresentationCroisee VARCHAR2(200) NOT NULL,
    CONSTRAINT pk_codePresentationCroisee PRIMARY KEY (codePresentationCroisee)
);
-- --------------------------------------------------------
CREATE TABLE compte_adm_tls (
    id number(12) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL ,
    ORDRE_REEL VARCHAR2(10) NOT NULL,
    DEPENSES_RECETTES VARCHAR2(10) NOT NULL,
    INVESTISSEMENT_FONCTIONNEMENT VARCHAR2(20) NOT NULL,
    CodeChapitre number(12) NOT NULL,
    CodeArticle number(12) NOT NULL,
    CodePresentationCroisee number(12) NOT NULL,
    EntiteFinanciereProgramme VARCHAR2(200) NOT NULL,
    MontantRealise FLOAT NOT NULL,
    CONSTRAINT pk_compte_admin_table PRIMARY KEY (id),
    CONSTRAINT fk_codeArticle FOREIGN KEY (CodeArticle) REFERENCES article (codeArticle),
    CONSTRAINT fk_codeChapitre FOREIGN KEY (CodeChapitre) REFERENCES chapitre (codeChapitre),
    CONSTRAINT fk_codePresetation FOREIGN KEY (CodePresentationCroisee) REFERENCES presentationcroisee (codePresentationCroisee),
    CONSTRAINT fk_entiteFinanciere FOREIGN KEY (EntiteFinanciereProgramme) REFERENCES entitefinanciereprogramme(EntiteFinanciereProgramme)
);
-- --------------------------------------------------------

COMMIT;
            </code>
         </pre>
         <h5>Insertion des données dans les tables depuis le .csv</h5>
         <p>Après insertion des données du fichier .csv dans la base de données à l’aide de sqlDeveloper on les récupère pour les insérer dans nos tables</p>
         <pre>
            <code class="language-sql">
INSERT INTO ARTICLE(codeArticle, libelleArticle)
SELECT DISTINCT codeArticle, libelleArticle FROM compte_adm_tls;

INSERT INTO CHAPITRE(codeChapitre, libelleChapitre)
SELECT DISTINCT codeChapitre, libelleChapitre FROM compte_adm_tls;

INSERT INTO PRESENTATIONCROISEE(codePresentationCroisee, libellePresentationCroisee)
SELECT DISTINCT codePresentationCroisee, libellePresentationCroisee FROM compte_adm_tls;

INSERT INTO ENTITEFINANCIEREPROGRAMME(entiteFinanciereProgramme, nomenclatureComptable)
SELECT DISTINCT entiteFinanciereProgramme, nomenclatureComptable FROM compte_adm_tls;

INSERT INTO COMPTE_ADMIN_TABLE
(Ordre_Reel,Depenses_Recettes,Investissement_Fonctionnement,codeChapitre,codeArticle,codePresentationCroisee,entiteFinanciereProgramme,montantRealise)
SELECT DISTINCT Ordre_Reel,Depenses_Recettes,Investissement_Fonctionnement,codeChapitre,codeArticle,codePresentationCroisee,entiteFinanciereProgramme,montantRealise  
FROM compte_adm_tls;

COMMIT;
            </code>
        </pre>
        <h4>La classe de la base de données </h4>
        <pre>
            <code class="language-java">
Class Database{
    public Connection connexionDatabase(); 
        permet la connexion à la base de données après récupérations des infos nécessaires dans le fichier config.properties  (Driver,login,…)

    public Connection fermerConnexion(); 
        fermeture de la connexion

    public ResultSet executerRequete(String sql); 
    	permet l’exécution d’une requête de type SELECT

    public String requeteUpdate(String sql);
    	permet l’exécution d’une requête de type (UPDATE, INSERT, DELETE);

    public ResultSet querySelectAll(String nomTable);
    	permet la récupération de toutes les données concernant nomTable

    public ResultSet querySelectAllOrderBy(String nomTable,String colonne);
    	permet la récupération de toutes les données concernant nomTable  et ordonnée avec colonne

    public ResultSet querySelectCol(String nomTable, String colonne);
    	permet la récupération de toutes les données concernant la colonne de nomTable 

    public ResultSet querySelectWhereColonneInt(String nomTable,String colonne ,int num);
    	permet la récupération de toutes les données correspondant à un code (num) de type int de la colonne codeArticle (colonne) de table article (nomTable) par exemple 

    public ResultSet querySelectWhereColonneString(String nomTable,String colonne ,String code)
    	pareil que pour la méthode au dessus sauf que le code est de type String

    public int querySelectGetTotalEnr();
    	permet de récupérer la dernière valeur de l’id de notre table principale

    public ResultSet querySelectbyArticle(int article);
    	permet la récupération des infos en fonction du codeArticle (article);

    public float querySelectbyArticleSum(int article, String d_r);
    	permet le calcul de la somme du montantRealisé en fonction du codeArticle (article) en les séparant par dépense et recette (d_r);
    
        public ResultSet querySelectbyChapitre(int chapitre);
    	permet la récupération des infos en fonction du codeArticle (chapitre);

    public float querySelectbyChapitreSum(int chapitre, String d_r);
    	permet le calcul de la somme du montantRealisé en fonction du codeArticle (chapitre) en les séparant par dépense et recette (d_r);
    	
    public ResultSet querySelectbyId(int id);
    	permet la récupération par numéro de l’id (méthode de test pas utilisé dans l’application);

    public ResultSet querySelectbyCodes(String e,String d_r, String i_f, int codechapitre,int codearticle,  int codepresentation,String o_r);
    	même  chose que au dessus mais permet la récupération des données avec les clés primaire (utilisé dans l’application);

    public String addToDatabase(String e,String d_r, String i_f, int codechapitre,int codearticle,  int codepresentation,String o_r,float montant);
    	permet  l’ajout d’un enregistrement dans la base de données

    public String deleteFromDatabase(int id);
	permet la supression d’un enregistrement de la table

    public String UpdateEnrDatabase(int id,String e,String d_r, String i_f, int codechapitre,int codearticle,  int codepresentation,String o_r,float montant);
    	permet la mise à jour d’un enregistrement de la table

    ResultSet filterSearch(Map<String, String> list);
    	permet la récupération de données en fonction des infos fournis par la liste
}
            </code>
        </pre>
    </section>

    <!-- parallax -->
    <div class="parallax-container">
        <div class="parallax">
            <img src="contenu/images/bck1.jpg" alt="Photo de Karolina Grabowska provenant de Pexels" class="responsive-img">
        </div>
    </div>

    <section id="interface" class="section container scrollspy">
        <h4>Interface Graphique</h4>

        <p>Class MainJFrame.java (JFrame): Conteneur pour les JPanel</p>
        <div class="container_image">
            <div class="image1">
                <img src="contenu/images/Sans titre.png" />
            </div>
            <div class="image2">
                <img src="contenu/images/1.png" />
            </div>
        </div>
        <p>Class RechercheC.java (JPanel) : l’affichage des données en fonction du code article ou du code chapitre</p>
        <div class="container_image">
            <div class="image1">
                <img src="contenu/images/2.png" />
            </div>
            <div class="image2">
                <img src="contenu/images/2.1.png" />
            </div>
        </div>
        <p>Class RechercheA.java (JPanel) : affichages des données après la précisons de certain critères</p>
        <div class="container_image">
            <div class="image1">
                <img src="contenu/images/3.png" />
            </div>
            <div class="image2">
                <img src="contenu/images/3_2.png" />
            </div>
        </div>
        <p>Class CRUD (JPanel): Conteneur pour les class Add_panel.java, Modif_panel.java, Delete_panel.java</p>
        <p> Class Add_panel.java (JPanel) : permet l’ajout de données dans la BDD</p>
        <p> Class Modif_panel.java (JPanel) : permet la modification de données dans la BDD</p>
        <p> Class Delete_panel.java (JPanel) : permet la supression de données dans la BDD</p>
            
        <div class="container_image">
            <div class="image1">
                <img src="contenu/images/4.png" />
            </div>
            <div class="image2">
                <img src="contenu/images/4.1.png" />
            </div>
        </div>
    </section>

    <!-- parallax -->
    <div class="parallax-container">
        <div class="parallax">
            <img src="contenu/images/bck1.jpg" alt="Photo de Karolina Grabowska provenant de Pexels" class="responsive-img">
        </div>
    </div>

    <section id="logiciel" class="section container scrollspy">
        
    </section>


    <!-- minified Jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- DATATABLE JS -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"></script>
    <!--Prism JS-->
    <script src="js/prism.js"></script> 
    <!-- Local JS File -->
    <script src="js/index.js"></script>
</body>

</html>